<div class="p-6">
    <p-toast></p-toast>
    <p-confirmDialog [style]="{width: '450px'}"></p-confirmDialog>

    <app-data-table
        [title]="'dashboard.controlPanel.pests.title' | translate"
        [data]="pests"
        [cols]="cols"
        [loading]="loading"
        tableId="pests-table"
        (edit)="onEdit($event)"
        (delete)="onDelete($event)">
    </app-data-table>

    <p-dialog [(visible)]="displayDialog" [style]="{width: '450px'}" [header]="'common.edit' | translate" [modal]="true" styleClass="p-fluid">
        <ng-template pTemplate="content">
            <form [formGroup]="pestForm" class="grid gap-4 mt-2">
                <div class="field">
                    <label for="name" class="block text-sm font-medium text-slate-700 mb-1">{{ 'dashboard.controlPanel.pests.name' | translate }}</label>
                    <input type="text" pInputText id="name" formControlName="name" class="w-full" />
                </div>
                
                <div class="field">
                    <label for="type" class="block text-sm font-medium text-slate-700 mb-1">{{ 'dashboard.controlPanel.pests.type' | translate }}</label>
                    <input type="text" pInputText id="type" formControlName="type" class="w-full" />
                </div>

                <div class="field">
                    <label for="severity" class="block text-sm font-medium text-slate-700 mb-1">{{ 'dashboard.controlPanel.pests.severity' | translate }}</label>
                    <p-select [options]="severityOptions" formControlName="severity" optionLabel="label" optionValue="value" styleClass="w-full"></p-select>
                </div>

                <div class="field">
                    <label for="status" class="block text-sm font-medium text-slate-700 mb-1">{{ 'dashboard.table.headers.status' | translate }}</label>
                    <p-select [options]="statusOptions" formControlName="status" optionLabel="label" optionValue="value" styleClass="w-full"></p-select>
                </div>
            </form>
        </ng-template>

        <ng-template pTemplate="footer">
            <button pButton pRipple [label]="'common.cancel' | translate" icon="pi pi-times" class="p-button-text" (click)="hideDialog()"></button>
            <button pButton pRipple [label]="'common.save' | translate" icon="pi pi-check" class="p-button-text" (click)="savePest()"></button>
        </ng-template>
    </p-dialog>
</div>
